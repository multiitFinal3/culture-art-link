<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.w3.org/1999/xhtml">
<html layout:decorate="~{common/layout/layoutMenubar}">
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" th:href="@{/css/user/myPage.css}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script th:inline="javascript">

        $(document).ready(
            function(){

                var user = [[${user}]];


                //#region 기본정보 입력

                /**
                 * 전체 지역 정보를 가져옴
                 *
                 */
                function findAllRegion(){

                    $.ajax({

                        url: '/user/signUp/findAllRegion',
                        method: 'POST',
                        contentType: 'application/json',
                        success: function(list){

                            $('#regionId').html("");

                            $.each(list, function(index, region){

                                var htmlContent = ``;

                                if(user.regionId==region.regionId){

                                    htmlContent = `<option value="${region.regionId}" selected>${region.regionName}</option>`;

                                }else{

                                    htmlContent = `<option value="${region.regionId}">${region.regionName}</option>`;

                                }

                                $('#regionId').append(htmlContent);

                            })

                        }

                    })

                }

                findAllRegion();


                /**
                 * 성별 표시
                 *
                 */
                 function presentGender(gender){

                    $('#gender').html("");
                    var htmlContent = ``;
                    var 남 = "남";
                    var 여 = "여";

                    if(user.gender=="남"){
                        htmlContent = `<option value="남" selected>남</option><option value="여">여</option>`;
                    }else{
                        htmlContent = `<option value="남">남</option><option value="여" selected>여</option>`;
                    }

                    $('#gender').html(htmlContent);

                 }

                 presentGender(gender);



                /**
                 * 이미지 표시
                 * @param {string} img
                 */
                 function renderImg(img){

                    var htmlContent = ``;

                    if(!img || img == "null" || img==""){
                        htmlContent = `
                            <img class="profileImg" src="/img/festival/noPhoto.png" alt="이미지가 없습니다">
                        `;
                    }else{
                        htmlContent = `
                            <img class="profileImg" src="${img}" alt="이미지가 없습니다">
                        `;
                    }

                    $('#profileImg').html(htmlContent);

                 }

                renderImg(user.userProfilePic);



                /**
                 * 사용자 프로필 사진 변경 시 이미지 바꾸는 이벤트
                 *
                 */
                $("input:file").change(function(){

                    var file = this.files[0];

                    if(file){

                        var reader = new FileReader();

                        reader.onload = function(e){

                            var changeSrc = e.target.result;

                            var htmlContent = ``;

                            htmlContent = `
                                <img class="profileImg" src="${changeSrc}" alt="이미지가 없습니다">
                            `;

                            $('#profileImg').html(htmlContent);


                        }

                        reader.readAsDataURL(file);

                    }
                })



                /**
                * 회원정보 삭제
                *
                */
                $(document).on('click','#deleteAccount', function(){

                    $.ajax({

                        url: '/user/deleteUserAccount',
                        method: 'POST',
                        contentType: 'application/json',
                        success: function(){
                            alert("회원 탈퇴 되었습니다.");
                            window.location = "/user/logout";
                        }
                    })
                })



                /**
                * 회원정보 수정
                *
                */
                $(document).on('submit','#basicForm', function(event){
                    console.log("#updateAccount")
                    event.preventDefault();

                    var formData = new FormData();

                    var fileInput = document.getElementById('uploadFile');
                    if(fileInput && fileInput.files.length > 0){
                        formData.append('file', fileInput.files[0]);
                    }


                    var email = document.getElementById('email').value;
                    formData.append('email', email);

                    var password = document.getElementById('password').value;
                    formData.append('password', password);

                    var userName = document.getElementById('userName').value;
                    formData.append('userName', userName);

                    var tel = document.getElementById('tel').value;
                    formData.append('tel', tel);

                    var userAge = document.getElementById('userAge').value;
                    formData.append('userAge', userAge);

                    var gender = document.getElementById('gender').options[document.getElementById('gender').selectedIndex].value;
                    formData.append('gender', gender);

                    var regionId = document.getElementById('regionId').options[document.getElementById('regionId').selectedIndex].value;
                    formData.append('regionId', regionId);

                    console.log(regionId);
                    console.log(email);

                    var isEmailValid = validateSameEmail(email);

                     if(!isEmailValid){

                        return;

                     }

                    $.ajax({

                        url: '/user/updateUserAccount',
                        method: 'POST',
                        data: formData,
                        processData: false,
                        contentType: false,
                        success: function(){
                            alert("회원정보 수정 되었습니다.");
                            window.location = "/user/myPage";
                        },
                        error: function(xhr, status, error){

                            alert('회원정보 수정 실패');

                        }
                    })
                })



                /**
                * 이메일 중복 검증
                * @param {string} email 검증할 이메일
                * @returns {boolean} 이메일이 안겹칠경우 true, 겹칠 경우 false
                *
                */
                function validateSameEmail(email){
                    return new Promise((resolve, reject) => {
                        $.ajax({
                            url: '/user/validateSameEmail',
                            method: 'POST',
                            data: {
                                email : email
                            },
                            success: function(user){

                                if(user){

                                    alert("이메일이 존재합니다.")
                                    resolve(false);

                                }else{

                                    alert("중복되지 않는 이메일입니다.")
                                    resolve(true);
                                }

                            },
                            error: function(xhr, status, error){

                                alert('같은 이메일 확인 실패');
                                return(false);

                            }
                        })
                    })
                }


                /**
                * 이메일 중복 검증 버튼
                *
                */
                $(document).on('click','#emailValidate', function(){

                    event.preventDefault();
                    var email = $('#email').val();
                    validateSameEmail(email);

                })




                //#endregion






                //# region 상단바 : 축제 카테고리별 찜 / 관심없음 / 리뷰 내역


                /**
                 * 축제 카드 클릭 시 상세 페이지로 이동
                 *
                 */
                $(document).on('click','.fcard',function(){

                    var festivalId = $(this).attr('id');
                    window.location.href='/festival/festival-detail?festivalId='+festivalId;

                })



                /**
                 * 축제 찜한 내역을 가져옴
                 *
                 */
                function findLoveFestivalList(){

                    $.ajax({

                        url: '/festival/findLoveFestivalList',
                        method: 'POST',
                        contentType: 'application/json',
                        success: function(list){
                            $('#upper').html("");
                            $('#upper').removeClass("page")
                            $('#upper').addClass("scroll")

                            $.each(list, function(index, festival){

                                var start = festival.startDate.length >0?
                                festival.startDate.substring(0,10):
                                "없음";

                                var end = festival.endDate.length >0?
                                festival.endDate.substring(0,10):
                                "없음";

                                var firstHtml= ``;

                                if(! festival.imgUrl || festival.imgUrl == "null"){

                                    firstHtml = `
                                        <div class="card fcard" id="${festival.festivalId}" data-value="${festival.festivalId}">
                                            <img class="card-img-top" src="/img/festival/noPhoto.png" alt="Card image cap">

                                    `;

                                }else{

                                    firstHtml = `
                                        <div class="card fcard" id="${festival.festivalId}" data-value="${festival.festivalId}">
                                            <img class="card-img-top" src="${festival.imgUrl}" alt="Card image cap">

                                    `;

                                }


                                var secondHtml = `
                                    <div class="card-body">
                                          <h5 class="card-title" title="${festival.festivalName}">${festival.festivalName}</h5>
                                          <p class="card-text" title="${festival.festivalContent}">${festival.festivalContent}</p>
                                          <p class="card-text">${start} - ${end}</p>
<!--                                          <p class="card-text t2" style="text-align:center;">★ ${festival.avgRate.toFixed(1)}</p>-->
                                          <div class="buttonZone">
                                            <button class="whiteHeartBtn">
                                                <img src="https://kr.object.ncloudstorage.com/team3/common/upNo.png"
                                                   style="width : 25px; height: 25px;" class="heart" value="${festival.festivalId}">
                                            </button>

                                            <button class="whiteHateBtn">
                                                <img src="https://kr.object.ncloudstorage.com/team3/common/downNo.png"
                                                   style="width : 25px; height: 25px;" class="hate" value="${festival.festivalId}">
                                            </button>
                                          </div>
                                    </div>

                                </div>
                                `;


                                var finalHtml = firstHtml + secondHtml;

                                $('#upper').append(finalHtml);

                                findLoveList();
                                findHateList();


                            })
                        }

                    })

                }

                findLoveFestivalList();



                /**
                 * 축제 관심없음한 내역을 가져옴
                 *
                 */
                function findHateFestivalList(){

                    $.ajax({

                        url: '/festival/findHateFestivalList',
                        method: 'POST',
                        contentType: 'application/json',
                        success: function(list){

                            $('#upper').html("");
                            $('#upper').removeClass("page")
                            $('#upper').addClass("scroll")

                            $.each(list, function(index, festival){

                                var start = festival.startDate.length >0?
                                festival.startDate.substring(0,10):
                                "없음";

                                var end = festival.endDate.length >0?
                                festival.endDate.substring(0,10):
                                "없음";

                                var firstHtml= ``;

                                if(! festival.imgUrl || festival.imgUrl == "null"){

                                    firstHtml = `
                                        <div class="card fcard" id="${festival.festivalId}" data-value="${festival.festivalId}">
                                            <img class="card-img-top" src="/img/festival/noPhoto.png" alt="Card image cap">

                                    `;

                                }else{

                                    firstHtml = `
                                        <div class="card fcard" id="${festival.festivalId}" data-value="${festival.festivalId}">
                                            <img class="card-img-top" src="${festival.imgUrl}" alt="Card image cap">

                                    `;

                                }


                                var secondHtml = `
                                    <div class="card-body">
                                          <h5 class="card-title" title="${festival.festivalName}">${festival.festivalName}</h5>
                                          <p class="card-text" title="${festival.festivalContent}">${festival.festivalContent}</p>
                                          <p class="card-text">${start} - ${end}</p>
<!--                                          <p class="card-text t2" style="text-align:center;">★ ${festival.avgRate.toFixed(1)}</p>-->
                                          <div class="buttonZone">
                                            <button class="whiteHeartBtn">
                                                <img src="https://kr.object.ncloudstorage.com/team3/common/upNo.png"
                                                   style="width : 25px; height: 25px;" class="heart" value="${festival.festivalId}">
                                            </button>

                                            <button class="whiteHateBtn">
                                                <img src="https://kr.object.ncloudstorage.com/team3/common/downNo.png"
                                                   style="width : 25px; height: 25px;" class="hate" value="${festival.festivalId}">
                                            </button>
                                          </div>
                                    </div>

                                </div>
                                `;


                                var finalHtml = firstHtml + secondHtml;


                                $('#upper').append(finalHtml);

                                findLoveList();
                                findHateList();


                            })
                        }

                    })

                }


                /**
                * 찜하기 / 찜 취소하기 버튼
                *
                */
                $(document).on('click','.heart', function(e){

                    e.stopImmediatePropagation();


                    var img = $(this);
                    var festivalId = img.attr('value');

                    if(img.closest(".card").hasClass("hasLove")){

                        $.ajax({

                            url: '/festival/deleteUserLoveFestival?festivalId=' + festivalId,
                            method: 'POST',
                            contentType: 'application/json',
                            success: function(res){
                                alert(res);
                                $('#love').click();
                            },
                            error: function(xhr, status, error){

                                alert('error : ',error);

                            }
                        })

                    }else{

                        if(img.closest(".card").hasClass("hasHate")){
                            img.closest(".card").find(".hate").click();
                        }


                        $.ajax({

                            url: '/festival/insertUserLoveFestival?festivalId=' + festivalId,
                            method: 'POST',
                            contentType: 'application/json',
                            success: function(res){

                                alert(res);
                                $('#love').click();

                            },
                            error: function(xhr, status, error){

                             alert('error : ',error);

                            }

                        })


                    }


                })


                /**
                * 찜 리스트 찾아서 색 바꾸기
                *
                */
                function findLoveList(){

                    var cardList = document.querySelectorAll(".fcard");

                    $.ajax({

                        url: '/festival/findLoveList',
                        method: 'POST',
                        contentType: 'application/json',
                        success: function(list){

                            $.each(cardList, function(index, card){

                                var cardString = card.getAttribute('data-value');
                                console.log(cardString);
                                var cardInt = parseInt(cardString, 10);

                                if(list.includes(cardInt)){

                                    $(card).addClass("hasLove");
                                    var heartImg = $(card).find('.heart');
                                    heartImg.attr('src','https://kr.object.ncloudstorage.com/team3/common/upBlue.png')

                                }else{

                                    var heartImg = $(card).find('.heart');
                                    heartImg.attr('src','https://kr.object.ncloudstorage.com/team3/common/upNo.png');
                                }
                            })
                        }
                    })

                }




               /**
                * 관심없음 하기 / 관심없음 취소하기 버튼
                *
                */
                $(document).on('click','.hate', function(e){

                    e.stopImmediatePropagation();

                    var img = $(this);
                    var festivalId = img.attr('value');

                    if(img.closest(".card").hasClass("hasHate")){

                        $.ajax({

                            url: '/festival/deleteUserHateFestival?festivalId=' + festivalId,
                            method: 'POST',
                            contentType: 'application/json',
                            success: function(res){
                                alert(res);
                                $('#hate').click();

                            },
                            error: function(xhr, status, error){

                                alert('error : ',error);

                            }
                        })

                    }else{

                        if(img.closest(".card").hasClass("hasLove")){
                            img.closest(".card").find(".heart").click();
                        }

                        $.ajax({

                            url: '/festival/insertUserHateFestival?festivalId=' + festivalId,
                            method: 'POST',
                            contentType: 'application/json',
                            success: function(res){

                                alert(res);
                                $('#hate').click();


                            },
                            error: function(xhr, status, error){

                             alert('error : ',error);

                            }

                        })


                    }

                })


                /**
                * 관심없음 리스트 찾아서 색 바꾸기
                *
                */
                function findHateList(){

                    var cardList = document.querySelectorAll(".fcard");

                    $.ajax({

                        url: '/festival/findHateList',
                        method: 'POST',
                        contentType: 'application/json',
                        success: function(list){

                            $.each(cardList, function(index, card){

                                var cardString = card.getAttribute('data-value');
                                console.log(cardString);
                                var cardInt = parseInt(cardString, 10);

                                if(list.includes(cardInt)){

                                    $(card).addClass("hasHate");
                                    var heartImg = $(card).find('.hate');
                                    heartImg.attr('src','https://kr.object.ncloudstorage.com/team3/common/downRed.png')

                                }else{

                                    var heartImg = $(card).find('.hate');
                                    heartImg.attr('src','https://kr.object.ncloudstorage.com/team3/common/downNo.png');
                                }

                            })
                        }
                    })

                }

                /**
                 * 전체 축제 리뷰 내역을 가져옴(페이지 별로)
                 *
                 */
                function findFestivalReviewListByPage(page){

                    $.ajax({

                        url: '/festival/findFestivalReviewListByUserId?page='+page,
                        method: 'POST',
                        contentType: 'application/json',
                        success: function(list){

                            $('#upper').html("");
                            $('#upper').removeClass("scroll");
                            $('#upper').addClass("page");

                            console.log("리뷰" + list);


                            var reviewHeadHtml = `

                                <div id="reviewListHead">

                                    <div id="leftHead">
                                        <h2 style="display: inline-block;">리뷰</h2>

                                        <div id="totalReviewCount" class="mt-3" style="display: inline-block; margin-left: 10px;">
                                            숫자
                                        </div>
                                    </div>

                                    <div id="reviewList">

                                    </div>

                                    <div id="reviewPages">

                                    </div>

                                </div>

                            `;

                            $('#upper').append(reviewHeadHtml);


                            $.each(list, function(index, review){

                                var reviewHtml = ``;
                                var profilePic = ``;
                                var attachment = ``;
                                var actionBtns = ``;
                                var reviewStarHtml = ``;
                                var reviewUserId = review.userId;
                                var reviewStarNum = review.festivalReviewStar;
                                var time = review.updatedAt.replace("T"," ").slice(0,19);

                                if((review.userProfilePic == null) || (review.userProfilePic == "")){
                                    profilePic = `<img src="https://kr.object.ncloudstorage.com/team3/common/noPhoto.png" alt="이미지 없음">`;
                                }else{
                                    profilePic = `<img src="${review.userProfilePic}">`;
                                }

                                if((review.attachment == null) || (review.attachment == "")){
                                    attachment = `<img src="https://kr.object.ncloudstorage.com/team3/common/noPhoto.png">`
                                }else{
                                    attachment = `<img src="${review.attachment}">`
                                }


                                actionBtns = `
                                    <div class="review-actions">
                                        <button class="update btn btn-outline-success" onclick="location.href='/festival/festival-detail?festivalId=${review.festivalId}'">상세</button>
                                        <button class="update btn btn-outline-success" value="${review.festivalReviewId}" type="button">수정</button>
                                        <button class="deleteBtn btn btn-outline-success" value="${review.festivalReviewId}">삭제</button>
                                        <button class="editBtn hide btn btn-outline-success" value="${review.festivalReviewId}">저장</button>
                                        <button class="cancelBtn hide btn btn-outline-success" value="${review.festivalReviewId}">취소</button>
                                    </div>
                                `;


                                for(let i = 1; i <= reviewStarNum; i++){
                                    var append = `
                                    <label class="goldStar">★</label>
                                    `;
                                    reviewStarHtml += append;
                                }

                                if(reviewStarNum < 5){
                                    for(let i = reviewStarNum + 1; i <= 5; i++){
                                        var append = `
                                        <label class="emptyStar">★</label>
                                        `;
                                        reviewStarHtml += append;
                                    }
                                }



                                reviewHtml = `

                                    <div class="review">

                                        <div class="user-info">

                                            ${profilePic}

                                            <div class="user-details">

                                                <span>${review.userName}</span>

                                                <span>${time}</span>

                                                <div class="review-rating" data-rating="${reviewStarNum}">
                                                    ${reviewStarHtml}
                                                </div>

                                            </div>

                                        </div>


                                        <div class="review-content">
                                            <p class="review-content-p-${review.festivalReviewId} review-content-p">${review.festivalReviewContent}</p>
                                            <div class="review-text-container hide">
                                                <form id="reviewForm_${review.festivalReviewId}" style="width:100%;">
                                                    <div class="star-rating2" style="width:100%;">
                                                        <input type="radio" id="star5_${review.festivalReviewId}" name="reviewStar" value="5" ${review.festivalReviewStar == 5? 'checked' : ''}/>
                                                        <label for="star5_${review.festivalReviewId}">★</label>
                                                        <input type="radio" id="star4_${review.festivalReviewId}" name="reviewStar" value="4" ${review.festivalReviewStar == 4? 'checked' : ''}/>
                                                        <label for="star4_${review.festivalReviewId}">★</label>
                                                        <input type="radio" id="star3_${review.festivalReviewId}" name="reviewStar" value="3" ${review.festivalReviewStar == 3? 'checked' : ''}/>
                                                        <label for="star3_${review.festivalReviewId}">★</label>
                                                        <input type="radio" id="star2_${review.festivalReviewId}" name="reviewStar" value="2" ${review.festivalReviewStar == 2? 'checked' : ''}/>
                                                        <label for="star2_${review.festivalReviewId}">★</label>
                                                        <input type="radio" id="star1_${review.festivalReviewId}" name="reviewStar" value="1" ${review.festivalReviewStar == 1? 'checked' : ''}/>
                                                        <label for="star1_${review.festivalReviewId}">★</label>
                                                    </div>
                                                    <input type="hidden" value="${review.festivalReviewId}" name="festivalReviewId">
                                                    <input type="hidden" value="${review.festivalId}" name="festivalId">
                                                    <textarea class="reviewText" name="reviewText" id="editContent-${review.festivalReviewId}" rows="5" value="${review.festivalReviewContent}">${review.festivalReviewContent}</textarea>
                                                </form>
                                            </div>
                                        </div>


                                        ${actionBtns}

                                    </div>

                                `;

                                $('#reviewList').append(reviewHtml);

                            })

                            findUserReviewCount();

                        }
                    })
                }



                /**
                * 유저별 전체 리뷰 페이지 버튼 만들기
                *
                *
                */
                function findUserReviewCount(){

                    $.ajax({

                        url: '/festival/findUserReviewCount',
                        method: 'POST',
                        contentType: 'application/json',
                        success: function(count){

                            $('#totalReviewCount').html(count);

                            var pages = 0;

                            if(count % 5 == 0){
                                pages = count / 5;
                            }else{
                                pages = count / 5 + 1;
                            }

                            for(var p=1; p<=pages; p++){

                                $('#reviewPages').append(`<button class="pageBtn1" style="font-size: 20px; margin: 0.5%">${p}</button>`)

                            }


                        }

                    })
                }


               /**
                * 리뷰 페이지 이벤트 버튼
                *
                */
                $(document).on('click','.pageBtn1', function(){

                    var page = $(this).text();
                    findFestivalReviewListByPage(page);

                    setTimeout(function(){
                      console.log("0.1s");
                      var btns = $('.pageBtn1');

                      console.log(btns)

                      btns.each(function(){

                            var button = $(this);
                            console.log(button);
                            if(button.text()==page){
                                console.log(button.text());
                                console.log("same")
                                button.addClass('activePage');

                            }else{
                                console.log(button.text());
                                button.removeClass('activePage');

                            }
                      })
                    },100);
                })


                /**
               * 리뷰 내역을 수정 가능하게 만들기
               */
                $(document).on('click','.update', function(){

                    var thisBtn = $(this);
                    thisBtn.addClass("hide");
                    thisBtn.siblings(".editBtn").removeClass("hide");
                    thisBtn.siblings(".cancelBtn").removeClass("hide");

                    thisBtn.parent().siblings(".review-content").find(".review-text-container").removeClass("hide");
                    thisBtn.parent().siblings(".review-content").find(".review-content-p").addClass("hide");
                    thisBtn.parent().siblings(".user-info").find(".review-rating").addClass("hide");
                })



               /**
               * 리뷰 내역 수정 취소 버튼
               */
                $(document).on('click','.cancelBtn', function(){

                    var thisBtn = $(this);
                    thisBtn.addClass("hide");
                    thisBtn.siblings(".update").removeClass("hide");
                    thisBtn.siblings(".editBtn").addClass("hide");
                    thisBtn.siblings(".cancelBtn").removeClass("hide");

                    thisBtn.parent().siblings(".review-content").find(".review-text-container").addClass("hide");
                    thisBtn.parent().siblings(".review-content").find(".review-content-p").removeClass("hide");
                    thisBtn.parent().siblings(".user-info").find(".review-rating").removeClass("hide");
                })




                /**
                * 리뷰 삭제
                *
                */
                $(document).on('click','.deleteBtn', function(){

                    var festivalReviewId = $(this).val();

                    $.ajax({

                        url: '/festival/deleteFestivalReviewByReviewId?festivalReviewId=' + festivalReviewId,
                        method: 'POST',
                        contentType: 'application/json',
                        success: function(res){

                            alert(res);
                            findFestivalReviewListByPage(1);


                        }
                    })
                })




                /**
                * 리뷰 수정
                *
                */
                $(document).on('click','.editBtn', function(){

                    var festivalReviewId = $(this).val();
                    var formId = `#reviewForm_${festivalReviewId}`;
                    var formData = new FormData($(formId)[0]);

                    $.ajax({

                        url: '/festival/updateFestivalReview',
                        method: 'POST',
                        data: formData,
                        processData: false,
                        contentType: false,
                        success: function(res){

                            alert("리뷰 수정 성공!!");
                            findFestivalReviewListByPage(1);
                        }
                    })
                })




                //#endregion




                //#region 상단바 : 공연

                //#endregion


                //#region 상단바 : 전시

                /**
                 * 전시 카드 클릭 시 상세 페이지로 이동
                 *
                 */
                 $(document).on('click','.ecard',function(){

                    var exhibitionId = $(this).attr('id');
                    window.location.href='/exhibition/detail/'+exhibitionId;

                })





                /**
                 * 전시 찜한 내역을 가져옴
                 *
                 */
                function findLoveExhibitionList(){

                    console.log("findLoveExhibitionList()")

                    $.ajax({

                        url: '/exhibition/liked',
                        method: 'GET',
                        contentType: 'application/json',
                        success: function(list){
                            console.log("/exhibition/liked")
                            $('#upper').html("");
                            $('#upper').removeClass("page")
                            $('#upper').addClass("scroll")

                            $.each(list, function(index, exhibition){

                                var start = exhibition.startDate.length >0?
                                exhibition.startDate.substring(0,10):
                                "없음";

                                var end = exhibition.endDate.length >0?
                                exhibition.endDate.substring(0,10):
                                "없음";

                                var firstHtml= ``;

                                if(! exhibition.image || exhibition.image == ""){

                                    firstHtml = `
                                        <div class="card hasLove ecard" id="${exhibition.id}" data-value="${exhibition.id}">
                                            <img class="card-img-top" src="/img/festival/noPhoto.png" alt="Card image cap">

                                    `;

                                }else{

                                    firstHtml = `
                                        <div class="card hasLove ecard" id="${exhibition.id}" data-value="${exhibition.id}">
                                            <img class="card-img-top" src="${exhibition.image}" alt="Card image cap">

                                    `;

                                }


                                var secondHtml = `
                                    <div class="card-body">
                                          <h5 class="card-title" title="${exhibition.title}">${exhibition.title}</h5>
                                          <p class="card-text" title="${exhibition.description}">${exhibition.description}</p>
                                          <p class="card-text">${start} - ${end}</p>
                                          <div class="buttonZone">
                                            <button class="whiteHeartBtn">
                                                <img src="https://kr.object.ncloudstorage.com/team3/common/upBlue.png"
                                                   style="width : 25px; height: 25px;" class="eheart" value="${exhibition.id}">
                                            </button>

                                            <button class="whiteHateBtn">
                                                <img src="https://kr.object.ncloudstorage.com/team3/common/downNo.png"
                                                   style="width : 25px; height: 25px;" class="ehate" value="${exhibition.id}">
                                            </button>
                                          </div>
                                    </div>

                                </div>
                                `;


                                var finalHtml = firstHtml + secondHtml;

                                $('#upper').append(finalHtml);

                            })
                        }

                    })

                }



                /**
                 * 전시 관심없음한 내역을 가져옴
                 *
                 */
                function findHateExhibitionList(){

                    $.ajax({

                        url: '/exhibition/unliked',
                        method: 'GET',
                        contentType: 'application/json',
                        success: function(list){

                            $('#upper').html("");
                            $('#upper').removeClass("page")
                            $('#upper').addClass("scroll")


                            $.each(list, function(index, exhibition){

                                var start = exhibition.startDate.length >0?
                                exhibition.startDate.substring(0,10):
                                "없음";

                                var end = exhibition.endDate.length >0?
                                exhibition.endDate.substring(0,10):
                                "없음";

                                var firstHtml= ``;

                                if(! exhibition.image || exhibition.image == ""){

                                    firstHtml = `
                                        <div class="card hasLove ecard" id="${exhibition.id}" data-value="${exhibition.id}">
                                            <img class="card-img-top" src="/img/festival/noPhoto.png" alt="Card image cap">

                                    `;

                                }else{

                                    firstHtml = `
                                        <div class="card hasLove ecard" id="${exhibition.id}" data-value="${exhibition.id}">
                                            <img class="card-img-top" src="${exhibition.image}" alt="Card image cap">

                                    `;

                                }


                                var secondHtml = `
                                    <div class="card-body">
                                          <h5 class="card-title" title="${exhibition.title}">${exhibition.title}</h5>
                                          <p class="card-text" title="${exhibition.description}">${exhibition.description}</p>
                                          <p class="card-text">${start} - ${end}</p>
                                          <div class="buttonZone">
                                            <button class="whiteHeartBtn">
                                                <img src="https://kr.object.ncloudstorage.com/team3/common/upNo.png"
                                                   style="width : 25px; height: 25px;" class="eheart" value="${exhibition.id}">
                                            </button>

                                            <button class="whiteHateBtn">
                                                <img src="https://kr.object.ncloudstorage.com/team3/common/downRed.png"
                                                   style="width : 25px; height: 25px;" class="ehate" value="${exhibition.id}">
                                            </button>
                                          </div>
                                    </div>

                                </div>
                                `;

                                var finalHtml = firstHtml + secondHtml;

                                $('#upper').append(finalHtml);

                            })

                        }

                    })
                }



                /**
                * 전시 찜하기 / 찜 취소하기 버튼
                *
                */
                $(document).on('click','.eheart', function(e){

                    e.stopImmediatePropagation();
                    var img = $(this);
                    var exhibitionId = img.attr('value');
                    var state = "interested";

                    var rData = {
                        exhibitionId : exhibitionId,
                        state : state
                    };

                    $.ajax({
                        url: '/exhibition/interested',
                        method: 'POST',
                        data: JSON.stringify(rData),
                        contentType: 'application/json',
                        success: function(){
                            $('#love').click();
                        },
                        error: function(xhr, status, error){
                            alert('error : ',error);
                        }
                    })

                })





                /**
                * 전시 관심없음 하기 / 관심없음 취소하기 버튼
                *
                */
                $(document).on('click','.ehate', function(e){

                    e.stopImmediatePropagation();
                    var img = $(this);
                    var exhibitionId = img.attr('value');
                    var state = "not_interested";

                    var rData = {
                        exhibitionId : exhibitionId,
                        state : state
                    };

                    $.ajax({
                        url: '/exhibition/interested',
                        method: 'POST',
                        data: JSON.stringify(rData),
                        contentType: 'application/json',
                        success: function(){
                            $('#hate').click();
                        },
                        error: function(xhr, status, error){
                            alert('error : ',error);
                        }
                    })

                })


                 /**
                 * 전체 전시 리뷰 내역을 가져옴(페이지 별로)
                 *
                 */
                function findExhibitionReviewListByPage(page){

                    console.log("findExhibitionReviewListByPage");

                    $.ajax({

                        url: '/exhibition/user-comment',
                        method: 'GET',
                        contentType: 'application/json',
                        success: function(list){
                            $('#upper').html("");
                            $('#upper').removeClass("scroll")
                            $('#upper').addClass("page")
                            var size = list.length;

                            console.log("리뷰" + list)

                            var reviewHeader = `

                                <div id="reviewListHead">

                                    <div id="leftHead">

                                        <h2 style="display: inline-block;">리뷰</h2>

                                        <div id="totalReviewCount" class="mt-3" style="display: inline-block; margin-left: 10px;">
                                            ${size}
                                        </div>

                                    </div>

                                    <div id="reviewList">

                                    </div>

                                    <div id="reviewPages">

                                    </div>

                                </div>

                            `;

                            $('#upper').html(reviewHeader);

                            var startIndex = (page -1)*5 + 1;
                            var endIndex = (page)*5;
                            var sliceList = list.slice(startIndex-1, endIndex);

                            console.log("sliceList");
                            console.log(sliceList);

                            $.each(sliceList, function(index, review){

                                var reviewIdPlusExhibitionId = review.id + "," + review.exhibitionId;
                                var reviewHtml = ``;
                                var profilePic = ``;
                                var actionBtns = ``;
                                var reviewStarHtml = ``;
                                var reviewStarNum = parseInt(review.stars);
                                var time = review.updatedAt.replace("T"," ");


                                if((review.profileImage == null) || (review.profileImage == "")){
                                    profilePic = `<img src="https://kr.object.ncloudstorage.com/team3/common/noPhoto.png" alt="이미지 없음">`;
                                }else{
                                    profilePic = `<img src="https://kr.object.ncloudstorage.com/team3${review.profileImage}">`;
                                }


                                actionBtns = `
                                    <div class="review-actions">
                                        <button class="update btn btn-outline-success" onclick="location.href='/exhibition/detail/${review.exhibitionId}'">상세</button>
                                        <button class="deleteBtn2 btn btn-outline-success" value="${reviewIdPlusExhibitionId}">삭제</button>
                                    </div>
                                `;

                                for(let i = 1; i <= reviewStarNum; i++){
                                    var append = `
                                    <label class="goldStar">★</label>
                                    `;
                                    reviewStarHtml += append;
                                }

                                if(reviewStarNum < 5){
                                    for(let i = reviewStarNum + 1; i <= 5; i++){
                                        var append = `
                                        <label class="emptyStar">★</label>
                                        `;
                                        reviewStarHtml += append;
                                    }
                                }


                                reviewHtml = `

                                    <div class="review">

                                        <div class="user-info">

                                            ${profilePic}

                                            <div class="user-details">

                                                <span>${review.userName}</span>

                                                <span>${time}</span>

                                                <div class="review-rating" data-rating="${reviewStarNum}">
                                                    ${reviewStarHtml}
                                                </div>

                                            </div>

                                        </div>


                                        <div class="review-content">
                                            <p class="review-content-p-${review.id} review-content-p">${review.content}</p>
                                            <div class="review-text-container hide">
                                                <form id="reviewForm_${review.id}" style="width:100%;">
                                                    <div class="star-rating2" style="width:100%;">
                                                        <input type="radio" id="star5_${review.id}" name="reviewStar" value="5" ${review.reviewStarNum == 5? 'checked' : ''}/>
                                                        <label for="star5_${review.festivalReviewId}">★</label>
                                                        <input type="radio" id="star4_${review.festivalReviewId}" name="reviewStar" value="4" ${review.reviewStarNum == 4? 'checked' : ''}/>
                                                        <label for="star4_${review.id}">★</label>
                                                        <input type="radio" id="star3_${review.id}" name="reviewStar" value="3" ${review.reviewStarNum == 3? 'checked' : ''}/>
                                                        <label for="star3_${review.id}">★</label>
                                                        <input type="radio" id="star2_${review.id}" name="reviewStar" value="2" ${review.reviewStarNum == 2? 'checked' : ''}/>
                                                        <label for="star2_${review.id}">★</label>
                                                        <input type="radio" id="star1_${review.id}" name="reviewStar" value="1" ${review.reviewStarNum == 1? 'checked' : ''}/>
                                                        <label for="star1_${review.id}">★</label>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>


                                        ${actionBtns}

                                    </div>

                                `;

                                $('#reviewList').append(reviewHtml);

                            })


                            findUserEReviewCount(size);

                        }

                    })
                }


                /**
                * 유저별 전체 리뷰 페이지 버튼 만들기
                *
                *
                */
                function findUserEReviewCount(count){

                    var pages = 0;

                    if(count % 5 == 0){
                        pages = count / 5;
                    }else{
                        pages = count / 5 + 1;
                    }

                    for(var p=1; p<=pages; p++){
                        $('#reviewPages').append(`<button class="pageBtn2" style="font-size: 20px; margin: 0.5%">${p}</button>`)
                    }

                }






               /**
                * 리뷰 페이지 이벤트 버튼
                *
                */
                $(document).on('click','.pageBtn2', function(){
                    var page = $(this).text();
                    findExhibitionReviewListByPage(page);

                    setTimeout(function(){
                          console.log("0.1s");
                          var btns = $('.pageBtn2');

                          console.log(btns)

                          btns.each(function(){

                                var button = $(this);
                                console.log(button);
                                if(button.text()==page){
                                    console.log(button.text());
                                    console.log("same")
                                    button.addClass('activePage');

                                }else{
                                    console.log(button.text());
                                    button.removeClass('activePage');

                                }
                          })
                    },100);


                })



                /**
                * 전시 리뷰 삭제
                *
                */
                $(document).on('click','.deleteBtn2', function(){

                    var reviewIdPlusExhibitionId = $(this).val().trim();
                    var ids = reviewIdPlusExhibitionId.split(",");
                    var reviewId = ids[0];
                    var exhibitionId = ids[1];

                    console.log(reviewId);
                    console.log(exhibitionId)

                    var data = {

                        id : reviewId

                    };

                    $.ajax({

                        url: `/exhibition/exhibition/${exhibitionId}/comment`,
                        method: 'DELETE',
                        contentType: 'application/json',
                        data: JSON.stringify(data),
                        success: function(){

                            alert("전시 댓글 삭제 성공");
                            $("#review").click()

                        },
                        error: function(error){

                            alert("전시 댓글 삭제 실패");

                        }
                    })
                })







                //#endregion


                //#region 상단바 : 문화제

                //#endregion


                //#region 하단바 : 축제의 찜키워드 , 관심없음 키워드


                  /**
                 * 축제 찜 키워드 중 카운트가 10개 이상인 것을 가져옴
                 *
                 */
                function findFestivalBigLoveKeyword(){

                    $.ajax({

                        url: '/festival/findFestivalBigLoveKeyword',
                        method: 'POST',
                        contentType: 'application/json',
                        success: function(list){
                            console.log("findFestivalBigLoveKeyword")
                            console.log(list);
                            $('#festivalKeywordList').html("");
                            var concat = '';
                            $.each(list, function(index, keyword){

                                var htmlContent = `<button value="${keyword.festivalKeywordId}" class="festivalLoveKeywordBtn bigLove">${keyword.festivalKeywordId}</button>`;

                                $('#festivalKeywordList').append(htmlContent);

                                concat += keyword.festivalKeywordId + " ";

                            })

                            $('#festivalKeyword').val(concat.trim()+" ");

                            findFestivalSmallLoveKeyword(1);

                        }

                    })

                }


                  /**
                 * 축제 찜 키워드 중 카운트가 10개 미만인 것을 5개씩 가져옴
                 *
                 */
                function findFestivalSmallLoveKeyword(page){

                    $.ajax({

                        url: '/festival/findFestivalSmallLoveKeyword?page='+page,
                        method: 'POST',
                        contentType: 'application/json',
                        success: function(list){
                            console.log("findFestivalSmallLoveKeyword")
                            console.log(list);
                            $.each(list, function(index, keyword){

                                var htmlContent = `<button value="${keyword.festivalKeywordId}" class="festivalLoveKeywordBtn">${keyword.festivalKeywordId}</button>`;

                                $('#festivalKeywordList').append(htmlContent);

                            })

                        }

                    })

                }


                /**
                * 축제 찜 키워드 추가 버튼
                *
                */
                $(document).on('click','#addFestivalLoveKeyword', function(){
                    var page = parseInt($(this).val());
                    page = page + 1;
                    findFestivalSmallLoveKeyword(page);
                    $(this).val(page);

                })

                findFestivalBigLoveKeyword();


                /**
                * 축제 찜 키워드 선택 시 색 변화 버튼
                *
                */
                $(document).on('click','.festivalLoveKeywordBtn', function(){

                    if($(this).hasClass('bigLove')){

                        $(this).removeClass('bigLove');

                    }else{

                        $(this).addClass('bigLove');

                    }

                    var btns = document.querySelectorAll('button.bigLove');

                    var concat = '';

                    btns.forEach(function(btn){

                        concat += (btn.value+" ");

                    })

                    $('#festivalKeyword').val(concat.trim());



                })



                  /**
                 * 축제 관심없음 키워드 중 카운트가 10개 이상인 것을 가져옴
                 *
                 */
                function findFestivalBigHateKeyword(){

                    $.ajax({

                        url: '/festival/findFestivalBigHateKeyword',
                        method: 'POST',
                        contentType: 'application/json',
                        success: function(list){
                            console.log("findFestivalBigHateKeyword")
                            console.log(list);
                            $('#festivalKeywordList').html("");
                            var concat = '';
                            $.each(list, function(index, keyword){

                                var htmlContent = `<button value="${keyword.festivalKeywordId}" class="festivalHateKeywordBtn bigHate">${keyword.festivalKeywordId}</button>`;

                                $('#festivalKeywordList').append(htmlContent);

                                concat += keyword.festivalKeywordId + " ";

                            })

                            $('#festivalKeyword').val(concat.trim()+" ");

                            findFestivalSmallHateKeyword(1);

                        }

                    })

                }


                  /**
                 * 축제 관심없음 키워드 중 카운트가 10개 미만인 것을 5개씩 가져옴
                 *
                 */
                function findFestivalSmallHateKeyword(page){

                    $.ajax({

                        url: '/festival/findFestivalSmallHateKeyword?page='+page,
                        method: 'POST',
                        contentType: 'application/json',
                        success: function(list){
                            console.log("findFestivalSmallHateKeyword")
                            console.log(list);
                            $.each(list, function(index, keyword){

                                var htmlContent = `<button value="${keyword.festivalKeywordId}" class="festivalHateKeywordBtn">${keyword.festivalKeywordId}</button>`;

                                $('#festivalKeywordList').append(htmlContent);

                            })

                        }

                    })

                }


                /**
                * 축제 관심없음 키워드 추가 버튼
                *
                */
                $(document).on('click','#addFestivalHateKeyword', function(){
                    var page = parseInt($(this).val());
                    page = page + 1;
                    findFestivalSmallHateKeyword(page);
                    $(this).val(page);

                })




                /**
                * 축제 관심없음 키워드 선택 시 색 변화 버튼
                *
                */
                $(document).on('click','.festivalHateKeywordBtn', function(){

                    if($(this).hasClass('bigHate')){

                        $(this).removeClass('bigHate');

                    }else{

                        $(this).addClass('bigHate');

                    }

                    var btns = document.querySelectorAll('button.bigHate');

                    var concat = '';

                    btns.forEach(function(btn){

                        concat += (btn.value+" ");

                    })

                    $('#festivalKeyword').val(concat.trim());



                })




                /**
                * 찜 키워드 선호키워드 수정버튼 클릭
                *
                */
                $(document).on('click','#keywordCountUpdate', function(){

                    var type = $('#loveOrHate').val();
                    var formData = new FormData($('#insertUserBigLoveHateKeyword')[0]);

                    $.ajax({

                        url: '/user/insertUserBigLoveHateKeyword',
                        method: 'POST',
                        data: formData,
                        processData: false,
                        contentType: false,
                        success: function(){

                            if(type=="L"){
                                alert("선호 키워드 수정 성공!!");
                                $('#loveKeywordList').click();
                            }else{
                                alert("비선호 키워드 수정 성공!!");
                                $('#hateKeywordList').click();
                            }

                        },
                        error: function(){

                            alert("선택 키워드 수정 실패")

                        }
                    })
                })




                //#endregion




                //#region 하단바 : 전시의 찜키워드 , 관심없음 키워드








                //#endregion





                //#endregion




                // #region 상단 필터 바 클릭 이벤트


                /**
                * 카테고리 드롭다운 클릭 시 텍스트를 가져옴
                *
                */
                $(document).on('click','.category', function(){

                    var categoryText = $(this).text();
                    $('#category').text(categoryText);

                    $('#leftZone').addClass('none');
                    $('#upperZone').removeClass('none');
                    $('#downZone').addClass('none');

                    $('#userInfo').closest('.genre-item').removeClass('active');
                    $('#love').closest('.genre-item').addClass('active');
                    $('#hate').closest('.genre-item').removeClass('active');
                    $('#review').closest('.genre-item').removeClass('active');
                    $('#loveKeywordList').closest('.genre-item').removeClass('active');
                    $('#hateKeywordList').closest('.genre-item').removeClass('active');

                    if(categoryText=="축제"){

                        findLoveFestivalList();

                    }else if(categoryText=="전시"){

                        findLoveExhibitionList();

                    }


                })


                /**
                * 회원정보 클릭 시
                *
                */
                $(document).on('click','#userInfo', function(){


                    $('#leftZone').removeClass('none');
                    $('#upperZone').addClass('none');
                    $('#downZone').addClass('none');

                    $('#userInfo').closest('.genre-item').addClass('active');
                    $('#love').closest('.genre-item').removeClass('active');
                    $('#hate').closest('.genre-item').removeClass('active');
                    $('#review').closest('.genre-item').removeClass('active');
                    $('#loveKeywordList').closest('.genre-item').removeClass('active');
                    $('#hateKeywordList').closest('.genre-item').removeClass('active');

                })

                $('#userInfo').closest('.genre-item').addClass('active');


                /**
                * 찜한내역 클릭 시 카테고리에 따라 다른 내용이 채워짐
                *
                */
                $(document).on('click','#love', function(){

                    var category = $('#category').text();
                    $('#leftZone').addClass('none');
                    $('#upperZone').removeClass('none');
                    $('#downZone').addClass('none');

                    $('#userInfo').closest('.genre-item').removeClass('active');
                    $('#love').closest('.genre-item').addClass('active');
                    $('#hate').closest('.genre-item').removeClass('active');
                    $('#review').closest('.genre-item').removeClass('active');
                    $('#loveKeywordList').closest('.genre-item').removeClass('active');
                    $('#hateKeywordList').closest('.genre-item').removeClass('active');

                    if(category=="축제"){

                        findLoveFestivalList();

                    }else if(category=="전시"){

                        findLoveExhibitionList();

                    }

                })





                /**
                * 관심없음 내역 클릭 시 카테고리에 따라 다른 내용이 채워짐
                *
                */
                $(document).on('click','#hate', function(){

                    var category = $('#category').text();
                    $('#leftZone').addClass('none');
                    $('#upperZone').removeClass('none');
                    $('#downZone').addClass('none');

                    $('#userInfo').closest('.genre-item').removeClass('active');
                    $('#love').closest('.genre-item').removeClass('active');
                    $('#hate').closest('.genre-item').addClass('active');
                    $('#review').closest('.genre-item').removeClass('active');
                    $('#loveKeywordList').closest('.genre-item').removeClass('active');
                    $('#hateKeywordList').closest('.genre-item').removeClass('active');

                    if(category=="축제"){

                        findHateFestivalList();

                    }else if(category=="전시"){

                        findHateExhibitionList();

                    }

                })




                /**
                * 내가 쓴 리뷰 클릭 시 카테고리에 따라 다른 내용이 채워짐
                *
                */
                $(document).on('click','#review', function(){

                    var category = $('#category').text();
                    $('#leftZone').addClass('none');
                    $('#upperZone').removeClass('none');
                    $('#downZone').addClass('none');

                    $('#userInfo').closest('.genre-item').removeClass('active');
                    $('#love').closest('.genre-item').removeClass('active');
                    $('#hate').closest('.genre-item').removeClass('active');
                    $('#review').closest('.genre-item').addClass('active');
                    $('#loveKeywordList').closest('.genre-item').removeClass('active');
                    $('#hateKeywordList').closest('.genre-item').removeClass('active');

                    if(category=="축제"){

                        findFestivalReviewListByPage(1);

                    }else if(category=="전시"){

                        findExhibitionReviewListByPage(1);

                    }

                });



                /**
                * 찜 키워드 클릭 시
                *
                */
                $(document).on('click','#loveKeywordList', function(){


                    $('#leftZone').addClass('none');
                    $('#upperZone').addClass('none');
                    $('#downZone').removeClass('none');

                    $('#userInfo').closest('.genre-item').removeClass('active');
                    $('#love').closest('.genre-item').removeClass('active');
                    $('#hate').closest('.genre-item').removeClass('active');
                    $('#review').closest('.genre-item').removeClass('active');
                    $('#loveKeywordList').closest('.genre-item').addClass('active');
                    $('#hateKeywordList').closest('.genre-item').removeClass('active');


                    var performanceHtml = `

                        <div id="performanceKeywordList"></div>
                        <button id="addPerformanceLoveKeyword" value="1" class="btn btn-outline-success">공연 키워드 추가</button>

                    `;


                    var exhibitionHtml = `

                        <div id="exhibitionKeywordList"></div>
                        <button id="addExhibitionLoveKeyword" value="1"class="btn btn-outline-success">전시 키워드 추가</button>

                    `;


                    var festivalHtml = `

                        <div id="festivalKeywordList"></div>
                        <button id="addFestivalLoveKeyword" value="1" class="btn btn-outline-success">축제 키워드 추가</button>

                    `;


                    var culturalPropertiesHtml = `

                        <div id="culturalPropertiesKeywordList"></div>
                        <button id="addCulturalPropertiesLoveKeyword" value="1" class="btn btn-outline-success">문화재 키워드 추가</button>

                    `;

                    $('#performanceZone').html(performanceHtml);
                    $('#exhibitionZone').html(exhibitionHtml);
                    $('#festivalZone').html(festivalHtml);
                    $('#culturalPropertiesZone').html(culturalPropertiesHtml);

                    $('#festivalKeyword').val("");
                    $('#loveOrHate').val("L");
                    $('#keywordCountUpdate').text("선호 키워드 수정");


                    findFestivalBigLoveKeyword();


                });




                /**
                * 하단바 관심없음 키워드 클릭 시
                *
                */
                $(document).on('click','#hateKeywordList', function(){

                    $('#leftZone').addClass('none');
                    $('#upperZone').addClass('none');
                    $('#downZone').removeClass('none');

                    $('#userInfo').closest('.genre-item').removeClass('active');
                    $('#love').closest('.genre-item').removeClass('active');
                    $('#hate').closest('.genre-item').removeClass('active');
                    $('#review').closest('.genre-item').removeClass('active');
                    $('#loveKeywordList').closest('.genre-item').removeClass('active');
                    $('#hateKeywordList').closest('.genre-item').addClass('active');




                    var performanceHtml = `

                        <div id="performanceKeywordList"></div>
                        <button id="addPerformanceHateKeyword" value="1" class="btn btn-outline-success">공연 키워드 추가</button>

                    `;


                    var exhibitionHtml = `

                        <div id="exhibitionKeywordList"></div>
                        <button id="addExhibitionHateKeyword" value="1" class="btn btn-outline-success">전시 키워드 추가</button>

                    `;


                    var festivalHtml = `

                        <div id="festivalKeywordList"></div>
                        <button id="addFestivalHateKeyword" value="1" class="btn btn-outline-success">축제 키워드 추가</button>

                    `;


                    var culturalPropertiesHtml = `

                        <div id="culturalPropertiesKeywordList"></div>
                        <button id="addCulturalPropertiesHateKeyword" value="1" class="btn btn-outline-success">문화재 키워드 추가</button>

                    `;

                    $('#performanceZone').html(performanceHtml);
                    $('#exhibitionZone').html(exhibitionHtml);
                    $('#festivalZone').html(festivalHtml);
                    $('#culturalPropertiesZone').html(culturalPropertiesHtml);

                    findFestivalBigHateKeyword();
                    $('#festivalKeyword').val("");
                    $('#loveOrHate').val("H");
                    $('#keywordCountUpdate').text("비선호 키워드 수정");


                });








                //# endregion



            }
        )


    </script>
</head>
<body>

<div layout:fragment="content">

    <div id="realContent">

        <div class="filter-container"> <!-- 필터 컨테이너 추가 -->
            <div class="genre-filter">
                <ul>

                    <li>
                        <div class="genre-item">
                            <a id="userInfo" class="userInfo">회원정보</a>
                        </div>
                    <li>

                    <li class="dropdown">

                        <div class="genre-item">
                            <a href="javascript:void(0)" class="dropbtn" id="category">축제</a>
                            <div class="dropdown-content">
                                <a id="performance" class="category">공연</a>
                                <a id="exhibition" class="category">전시</a>
                                <a id="festival" class="category">축제</a>
                                <a id="culturalPro" class="category">문화제</a>
                            </div>
                        </div>

                    </li>

                    <li>
                        <div class="genre-item">
                            <a id="love">찜한 내역</a>
                        </div>
                    </li>

                    <li>
                        <div class="genre-item">
                            <a id="hate">관심없음 내역</a>
                        </div>
                    </li>

                    <li>
                        <div class="genre-item">
                            <a id="review">내가 쓴 리뷰</a>
                        </div>
                    </li>


                    <li>
                        <div class="genre-item">
                            <a id="loveKeywordList">찜 키워드</a>
                        </div>
                    </li>

                    <li>
                        <div class="genre-item">
                            <a id="hateKeywordList">관심없음 키워드</a>
                        </div>
                    </li>

                </ul>
            </div>
        </div>


        <div id="rightZone">

            <div id="leftZone">

                <form encType="multipart/form-data" id="basicForm" style="font-size: 28px;">
                    <h1>회원정보</h1><br><br>
                    <div id="profileImg">
                    </div>
                    <br>

                    <div>
                        <label for="uploadFile"><img
                                src="https://img.icons8.com/?size=100&id=67360&format=png&color=000000" alt="User Icon"></label>
                        <input name="uploadFile" class="rounded" id="uploadFile" type="file" accept="image/*">
                    </div>

                    <div>
                        <label for="email"><img
                                src="https://img.icons8.com/?size=100&id=8uaNSRthy4ju&format=png&color=000000"
                                alt="Email Icon"></label>
                        <input name="email" class="rounded" id="email" th:value="${user.email}"
                               placeholder="${user.email}" required style="background-color: lightblue"
                               pattern="^[a-zA-Z0-9_]{5,}@[a-zA-Z]{3,}\.com$"><button id="emailValidate" type="button" class="btn btn-outline-success">중복확인</button>
                    </div>

                    <div>
                        <label for="password"><img
                                src="https://img.icons8.com/?size=100&id=B9ytemSyoM31&format=png&color=000000"
                                alt="Password Icon"></label>
                        <input name="password" class="rounded" id="password" type="password" required
                               style="background-color: lightblue" th:value="${user.password}" placeholder="******"
                               pattern="^[a-zA-Z0-9_]{5,}$">
                    </div>

                    <div>
                        <label for="userName"><img
                                src="https://img.icons8.com/?size=100&id=ZuNYjWxqVWsa&format=png&color=000000"
                                alt="userName Icon"></label>
                        <input name="userName" class="rounded" id="userName" th:value="${user.userName}"
                               placeholder="${user.userName}" pattern="^[a-zA-Z가-힣]{3,}$"
                               style="background-color: lightblue">
                    </div>

                    <div>
                        <label for="tel"><img
                                src="https://img.icons8.com/?size=100&id=wqTsYydyXBbo&format=png&color=000000"
                                alt="tel Icon"></label>
                        <input name="tel" class="rounded" id="tel" type="tel" th:value="${user.tel}"
                               placeholder="${user.tel}" pattern="[0-9]{3}-[0-9]{4}-[0-9]{4}">
                    </div>

                    <div>
                        <label for="userAge"><img
                                src="https://img.icons8.com/?size=100&id=7zkG0i0pLOGd&format=png&color=000000"
                                alt="userAge Icon"></label>
                        <input name="userAge" class="rounded" id="userAge" type="number" th:value="${user.userAge}"
                               th:placeholder="${user.userAge}">
                    </div>

                    <div>
                        <label for="gender"><img
                                src="https://img.icons8.com/?size=100&id=33337Z2WxW0x&format=png&color=000000"
                                alt="gender Icon"></label>
                        <select name="gender" class="rounded" id="gender" th:value="${user.gender}">
                        </select>
                    </div>

                    <div>
                        <label for="regionId"><img
                                src="https://img.icons8.com/?size=100&id=43632&format=png&color=000000"
                                alt="region Icon"></label>
                        <select name="regionId" id="regionId" class="rounded"></select>
                    </div>

                    <div>
                        <button type="submit" id="updateAccount" class="btn btn-outline-success" th:value="${user.userId}">수정</button>
                        <button type="button" id="deleteAccount" class="btn btn-outline-success" th:value="${user.userId}">탈퇴</button>
                    </div>

                </form>

            </div>


            <div id="upperZone" class="none">


                <div id="upper">

                    아아

                </div>


            </div>

            <div id="downZone" class="none">

                <div id="down">
                    <div id="performanceZone">
                        <div id="performanceKeywordList">
                        </div>
                        <button id="addPerformanceLoveKeyword" value="1" class="btn btn-outline-success">공연 키워드 추가</button>
                    </div>
                    <div id="exhibitionZone">
                        <div id="exhibitionKeywordList">
                        </div>
                        <button id="addExhibitionLoveKeyword" value="1" class="btn btn-outline-success">전시 키워드 추가</button>
                    </div>
                    <div id="festivalZone">
                        <div id="festivalKeywordList">
                        </div>
                        <button id="addFestivalLoveKeyword" value="1" class="btn btn-outline-success">축제 키워드 추가</button>
                    </div>
                    <div id="culturalPropertiesZone">
                        <div id="culturalPropertiesKeywordList">
                        </div>
                        <button id="addCulturalPropertiesLoveKeyword" value="1" class="btn btn-outline-success">문화재 키워드 추가</button>
                    </div>
                    <div id="updateBtnZone">
                        <form style="font-size: 28px;" id="insertUserBigLoveHateKeyword">
                            <input type="hidden" id="performanceKeyword" name="performanceKeyword">
                            <input type="hidden" id="exhibitionKeyword" name="exhibitionKeyword">
                            <input type="hidden" id="festivalKeyword" name="festivalKeyword">
                            <input type="hidden" id="culturalPropertiesKeyword" name="culturalPropertiesKeyword">
                            <input type="hidden" id="loveOrHate" name="loveOrHate" value="L">
                            <button type="button" id="keywordCountUpdate" class="btn btn-outline-success">선호 키워드 수정</button>
                        </form>
                    </div>
                </div>

            </div>


        </div>


    </div>


</div>


</body>
</html>